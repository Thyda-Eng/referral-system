<div>
  <form id="place_search_form">
    <input type="hidden" name="error" value="<%= params[:error] %>" />
    <%= text_field_tag 'place_search', params['place_search'], :style => 'width:280px', :autocomplete => :off %>
    <%= submit_tag 'Search place' %>
    <% if params[:place_search] && !@place %>
      <span style="color:red">Couldn't find that place</span>
    <% end %>
    <% params.delete :place_search %>
  </form>
</div>

<script type="text/javascript">
  $(function() {
      $('#place_search').autocomplete({
        url: '<%= autocomplete_places_path %>',
        minChars: 1,
        matchInside: true,
        onItemSelect: function(item) {
          $('#place_search_form').submit();
        }
      });
  });
</script>
